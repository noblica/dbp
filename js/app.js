!function(){"use strict";angular.module("test",[])}(),function(){"use strict";function e(e,r){function n(e){e.go("app.home")}e.state("app",{"abstract":!0,controller:"AppController",controllerAs:"app",template:"<ui-view></ui-view>"}).state("app.home",{url:"",controller:"TestController",controllerAs:"vm",templateUrl:"app/TestModule/test.html"}),r.when("",n).when("/",n).otherwise("/error/404"),n.$inject=["$state"]}angular.module("app",["ui.router","ui.bootstrap","ngAnimate","core","pipeline","test"]).config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";angular.module("core",[])}(),function(){"use strict";angular.module("pipeline",[])}(),function(){"use strict";function e(){function e(){}function r(e){n.localHistoryCollapse=!n.localHistoryCollapse,console.log(n.localHistoryCollapse)}var n=this;n.corelationRegisterCollapse=!1,n.localHistoryCollapse=!0,n.predictionMachinesCollapse=!0,n.toggleLocalHistory=r,e()}angular.module("test").controller("TestController",e),e.$inject=[]}(),function(){"use strict";function e(){function e(){console.log("Layout controller loaded!")}e()}angular.module("app").controller("AppController",e),e.$inject=[]}(),function(){"use strict";function e(e){function r(r,n){s.a=e.getValueOfReg(r),s.b=void 0!==Number(n)?Number(n):s.b,isNaN(n)&&(s.bRegName=n,s.b=e.getValueOfReg(n))}function n(n,f,p){function d(){return e.setValueOfReg(s.aRegName,s.b),O=s.b}function v(){return O=s.a+s.b,u(!1),a(!1),Math.abs(O)>s.maxValue&&(u(!0),O=o(O)),C=i(O),t(M,j,C)&&a(!0),e.setValueOfReg(s.aRegName,O),O}function h(){return u(!1),a(!1),c(!1),O=o(s.a-s.b),s.b>s.a&&u(!0),s.b===s.a&&c(!0),C=i(O),t(M,j,C)&&a(!0),e.setValueOfReg(s.aRegName,O),O}function m(){return u(!1),a(!1),c(!1),O=s.a*s.b,0===O&&c(!0),Math.abs(O)>s.maxValue&&(u(!0),O=o(O)),C=i(O),t(M,j,C)&&a(!0),O}function g(){return a(!1),O=s.a/s.b,C===1/0&&a(!0),O}function I(){return O=s.a&s.b,l(!!i(O)),e.setValueOfReg(s.aRegName,O),O}function b(){return O=s.a|s.b,l(!!i(O)),e.setValueOfReg(s.aRegName,O),O}function P(){return O=s.a^s.b,l(!!i(O)),e.setValueOfReg(s.aRegName,O),O}function y(){return c(!1),l(!1),O=s.a&s.b,0===O&&c(!0),l(!!i(O)),O}function S(){return O=~s.a,e.setValueOfReg(s.aRegName,O),O}function R(){console.log("end reached!")}r(n,f);var O=s.cmpResult,M=i(s.a),j=i(s.b),C=null,F={mov:d,add:v,sub:h,cmp:h,mul:m,div:g,and:I,or:b,xor:P,test:y,not:S,end:R};return s.cmpResult=F[p](),s.cmpResult}function t(e,r,n){return e===r&&n!==e}function i(e){var r=s.bitSize,n=o(e),t=n.toString(2),i=Number(t.split("").reverse()[r]);return i?i:0}function o(e){return Number(e)&s.maxValue}function c(e){return s.flags.ZF=void 0===e?0===s.cmpResult:e,s.flags}function u(e){return s.flags.CF=void 0===e?s.flags.CF:e,s.flags}function a(e){return s.flags.OF=e,void 0===e&&(s.flags.OF=void 0===e?s.flags.OF:e),s.flags}function l(e){return s.flags.SF=e||s.cmpResult<0||s.cmpResult>s.maxValue,s.flags}var s={flags:{ZF:!1,CF:!1,OF:!1,SF:!1},a:0,aRegName:"",b:0,bRegName:"",cmpResult:0,maxValue:Math.pow(2,16)-1,maxValueSigned:Math.pow(2,15)-1,bitSize:15,compareAndSetFlags:n};return s}angular.module("app").factory("aluService",e),e.$inject=["registerService"]}(),function(){"use strict";function e(e,r,n,t,i,o,c,u,a,l,s,f,p,d,v){function h(e){var r=e.split("\n"),n=P(r);d.buffer=[],O.codeArray=a.setAndRemoveLabelsFromCodeArray(n),s.pipelineStarted=!0,l.pc=-1,O.stepByStep?(l.setNewPc(),S(l.pc,O.codeArray)):I(O.codeArray)}function m(e){s.pipelineInterval=f(function(){g()&&O.trapFlag?(f.cancel(s.pipelineInterval),O.trapFlag=!1):(O.trapFlag=!0,y(l.pc,e).then(function(){b(e)&&(f.cancel(s.pipelineInterval),s.flushPipeline(),p.clear(),s.flushPipeline(!1,!1,!1,!0),s.pipelineStarted=!1,s.pipelineActive=!1)}))},10)}function g(){return o.instructionsInEX.some(function(e){return v.isJmpInstruction(e.operation)||v.isFlagGenInstruction(e.operation)})}function I(e){s.pipelineInterval=f(function(){y(l.pc,e).then(function(){b(e)&&(f.cancel(s.pipelineInterval),s.flushPipeline(),p.clear(),s.flushPipeline(!1,!1,!1,!0),s.pipelineStarted=!1,s.pipelineActive=!1)},10)})}function b(e){var r=s.isPipelineEmpty(),n=p.modelIsEmpty(),t=c.endReached;return r&&n&&t}function P(e){var r=e.filter(function(e){return""!==e});return r}function y(e,r,n){return R().then(function(){l.setNewPc();var e=S(l.pc,r,n);return e})}function S(r,t,o){return e.parse(r,t,1).then(n.parse).then(i.parse).then(c.parse).then(function(e){console.log(e)})}function R(){return c.pipeThrough().then(i.pipeThrough).then(n.pipeThrough).then(e.pipeThrough)}var O=this;O.codeInput="mov ax, 0\nmov bx, 2\nl1:\nadd ax, 1\ncmp ax, bx\njl l1\nend",O.stepByStep=!1,O.codeArray=[],O.pipelineStarted=!1,O.endReached=!1,O.trapFlag=!1,O.IFModel=r,O.IDModel=t,O.EXModel=o,O.WBModel=u,O.common=s,O.doPrediction=h,O.goToNextBranchInstruction=m}angular.module("app").controller("CodeInputController",e),e.$inject=["IFService","IFModel","IDService","IDModel","EXService","EXModel","WBService","WBModel","labelService","pcService","common","$interval","speculativeService","speculativeModel","jmpInstructionService"]}(),function(){"use strict";function e(){var e={restrict:"E",controller:"CodeInputController",controllerAs:"ci",templateUrl:"app/codeInput/code-input.html"};return e}angular.module("app").directive("codeInput",e),e.$inject=[]}(),function(){"use strict";function e(e,r,n,t){function i(i,o,c,u){void 0===i?(e.flush(),r.flush(),n.flush()):(i&&e.flush(),o&&r.flush(),c&&n.flush(),u&&t.flush())}function o(){return 0===e.instructionsInIF.length&&0===r.instructionsInID.length&&0===n.instructionsInEX.length&&0===t.instructionsInWB.length}function c(e){var r=null!==e.firstOperator,n=null!==e.secondOperator;return e.operation+" "+(r?e.firstOperator:"")+(n?", "+e.secondOperator:"")}var u={pipelineStarted:!1,pipelineActive:!1,flushPipeline:i,isPipelineEmpty:o,instructionToText:c};return u}angular.module("core").factory("common",e),e.$inject=["IFModel","IDModel","EXModel","WBModel"]}(),function(){"use strict";function e(e){function r(){o.jmpInstructions=["jmp","je","jz","jne","jnz","jg","jnle","jge","jnl","jl","jnge","jle","jng"],o.flagGenInstructions=["test","cmp"]}function n(e){return o.jmpInstructions.indexOf(e)!==-1}function t(e){return o.flagGenInstructions.indexOf(e)!==-1}function i(r){var n=e.flags,t={jmp:!0,je:n.ZF,jz:n.ZF,jne:!n.ZF,jnz:!n.ZF,jg:!n.ZF&&n.SF===n.OF,jnle:!n.ZF&&n.SF===n.OF,jge:n.SF===n.OF,jnl:n.SF===n.OF,jl:n.SF!==n.OF,jnge:n.SF!==n.OF,jle:n.ZF||n.SF!==n.OF,jng:n.ZF||n.SF!==n.OF};return t[r]}var o={jmpInstructions:[],isJmpInstruction:n,isFlagGenInstruction:t,checkBranchCondition:i};return r(),o}angular.module("core").factory("jmpInstructionService",e),e.$inject=["aluService"]}(),function(){"use strict";function e(){function e(e,r){var n={};n[e.toLowerCase()]=r,t.labelArray.push(n)}function r(e){var r=null;return t.labelArray.some(function(n){if(void 0!==n[e])return r=n,!0}),r[e]}function n(r){for(var n=r,t=0;t<r.length;){var i=r[t];if(i.indexOf(":")!==-1){var o=i.slice(0,i.indexOf(":"));n.splice(t,1),e(o,t)}else t++}return n}var t={labelArray:[],getAddress:r,setLabelAddress:e,setAndRemoveLabelsFromCodeArray:n};return t}angular.module("core").factory("labelService",e),e.$inject=[]}(),function(){"use strict";function e(){function e(){n.pc+=1,null!==n.overridePc&&(n.pc=n.overridePc,n.overridePc=null)}function r(e,r){var t=r?r.toString(2):n.pc.toString(2),i=t.slice(-e);return parseInt(i,2)}var n={pc:-1,branchesPredictedTaken:[],overridePc:null,setNewPc:e,getLastBitsOfPc:r};return n}angular.module("core").factory("pcService",e),e.$inject=[]}(),function(){"use strict";function e(){function e(){r.currentPc=0,r.instructionsInEX=[],r.writeBackResults=[];var e={currentPc:r.currentPc,instructionSet:r.instructionsInEX,writeBackResults:r.writeBackResults};r.returnPromise.resolve(e)}var r={currentPc:null,returnPromise:null,nextPredictionFalse:!1,instructionsInEX:[],writeBackResults:[],flush:e};return r}angular.module("core").factory("EXModel",e),e.$inject=[]}(),function(){"use strict";function e(e,r,n,t,i,o,c,u,a,l,s,f,p,d){function v(r){return o.currentPc=r.currentPc,o.instructionsInEX=r.instructionSet,o.writeBackResults=[],P(o.instructionsInEX),I(),o.returnPromise=e.defer(),o.returnPromise.promise}function h(e,r){var c=n.checkBranchCondition(e.operation),u=t.getAddress(e.firstOperator),d=o.currentPc+r,v=(i.branchesPredictedTaken.indexOf(d),b()),h=s.getCurrentPrediction(d),m={pc:d,jmpToPc:u,delay:v,predictedValue:h?1:0,calculatedValue:c?1:0},g=f.getCopy(),I=a.formPredictedArray(a.buffer),P=parseInt(g.concat(I).join(""),2),y=f.useCor,S=p.useLht;!y&&S&&(P=i.getLastBitsOfPc(p.numOfPcBits,d));var R=p.getCopyOfLocalHistoryArrayFor(P),O=p.getLocalHistoryValue(P),M=s.getCopyOfMachine(O),j={localHistoryIndex:P,localHistoryArray:R,predictionMachineIndex:O,predictionMachineValue:M};s.updatePredictionsExceptCorelation(m.predictedValue,m.pc),l.createNewBranchBuffer(m,j),a.addingToSpeculative=!0}function m(e){var r=e.branchInfo.predictedValue,n=e.branchInfo.calculatedValue,t=e.branchInfo.pc,c=i.branchesPredictedTaken.indexOf(t);if(o.nextPredictionFalse&&(n=!n),n&&!r)return u.flushPipeline(),e.branchInfo.mispredicted=!0,e.branchInfo.mispredictionPc=e.branchInfo.jmpToPc,e.branchInfo.predictedValue=e.branchInfo.calculatedValue,!0;if(n&&r)i.branchesPredictedTaken.splice(c,1),e.branchInfo.shouldCommit=!0;else if(n||r){if(!n&&r)return u.flushPipeline(),e.branchInfo.mispredicted=!0,e.branchInfo.mispredictionPc=t+1,i.branchesPredictedTaken.splice(c,1),e.branchInfo.predictedValue=e.branchInfo.calculatedValue,!0}else e.branchInfo.shouldCommit=!0;return!1}function g(e){o.writeBackResults=S(e)}function I(){a.buffer.map(function(e,r){return e.branchInfo.delay&&(e.branchInfo.delay-=1),0===e.branchInfo.delay&&(e.branchInfo.calculated=!0,m(e),l.mergeAndCommitValues(e)),e}),0===a.buffer.length&&(a.addingToSpeculative=!1)}function b(){return d.floor(40*d.random()+4)}function P(e){return e.some(function(e,r){var t=e.operation,i=n.isJmpInstruction(t);if(i){var o=h(e,r);return o}g(e)}),o.instructionsInEX}function y(){if(o.returnPromise){var r={currentPc:o.currentPc,instructionSet:o.instructionsInEX,writeBackResults:o.writeBackResults};return o.returnPromise.resolve(r),o.returnPromise.promise}return e.resolve()}function S(e){var n=e.firstOperator,t=e.secondOperator,i=e.operation,u=r.compareAndSetFlags(n,t,i),s={currentPc:o.currentPc,register:e.firstOperator,result:u,operation:i};return a.addingToSpeculative?c.shouldWriteBack(i)&&l.addTo(n,u):o.writeBackResults.push(s),o.writeBackResults}var R={parse:v,pipeThrough:y,parseJumpInstruction:h};return R}angular.module("core").factory("EXService",e),e.$inject=["$q","aluService","jmpInstructionService","labelService","pcService","EXModel","WBService","common","speculativeModel","speculativeService","predictionMachinesService","corelationRegisterService","localHistoryTableService","Math"]}(),function(){"use strict";function e(){function e(){r.currentPc=0,r.instructionsInID=[];var e={currentPc:r.currentPc,instructionSet:r.instructionsInID};r.returnPromise.resolve(e)}var r={currentPc:null,returnPromise:null,instructionsInID:[],flush:e};return r}angular.module("core").factory("IDModel",e),e.$inject=[]}(),function(){"use strict";function e(e,r){function n(n){return r.currentPc=n.currentPc,r.instructionsInID=o(n.instructionSet),r.returnPromise=e.defer(),r.returnPromise.promise}function t(){if(r.returnPromise){var n={currentPc:r.currentPc,instructionSet:r.instructionsInID};return r.returnPromise.resolve(n),r.returnPromise.promise}return e.resolve()}function i(e){var r=e.replace(",",""),n=r.split(" "),t={operation:n[0].toLowerCase(),firstOperator:void 0===n[1]?null:n[1].toLowerCase(),secondOperator:void 0===n[2]?null:n[2].toLowerCase()};return t}function o(e){var r=[];return e.forEach(function(e){var n=i(e);r.push(n)}),r}var c={parse:n,pipeThrough:t,decodeSingleInstruction:i};return c}angular.module("core").factory("IDService",e),e.$inject=["$q","IDModel"]}(),function(){"use strict";function e(){function e(){r.currentPc=0,r.instructionsInIF=[];var e={currentPc:r.currentPc,instructionSet:r.instructionsInIF};r.returnPromise.resolve(e)}var r={currentPc:null,returnPromise:null,instructionsInIF:[],flush:e};return r}angular.module("core").factory("IFModel",e),e.$inject=[]}(),function(){"use strict";function e(e,r,n,t,i,o,c){function u(n,t,i){r.currentPc=n||0,i=i||1,r.returnPromise=e.defer();var o=r.currentPc,c=r.currentPc+i;p.codeArrayInput=angular.copy(t);var u=t.slice(o,c);return a(u),r.instructionsInIF=u,r.returnPromise.promise}function a(e){for(var i=0;i<e.length;){var u=e[i],a=n.decodeSingleInstruction(u),f=i+r.currentPc,p=t.isJmpInstruction(a.operation),d=c.getCurrentPrediction(f)?1:0;if(p&&d){var v=e.length-i-1,h=s(a);if(v>0){var m=l(h,v);e.splice(i,v),e.concat(m)}o.branchesPredictedTaken.push(f),o.overridePc=h+v}i++}return e}function l(e,r){var n=e+r;return p.codeArrayInput.slice(e,n)}function s(e){var r=e.firstOperator;return i.getAddress(r)}function f(){if(r.returnPromise){var n={currentPc:r.currentPc,instructionSet:r.instructionsInIF};return r.returnPromise.resolve(n),r.returnPromise.promise}return e.resolve()}var p={currentPc:null,returnPromise:null,instructionsInIF:[],codeArrayInput:[],parse:u,pipeThrough:f};return p}angular.module("core").factory("IFService",e),e.$inject=["$q","IFModel","IDService","jmpInstructionService","labelService","pcService","predictionMachinesService"]}(),function(){"use strict";function e(){function e(){r.currentPc=0,r.instructionsInWB=[],r.writeBackResults=[],r.returnPromise.resolve()}var r={currentPc:null,returnPromise:null,instructionsInWB:[],writeBackResults:[],flush:e};return r}angular.module("core").factory("WBModel",e),e.$inject=[]}(),function(){"use strict";function e(e,r,n){function t(e){return n.currentPc=e.currentPc,n.instructionsInWB=e.instructionSet,n.writeBackResults=e.writeBackResults,i(e.writeBackResults),n.returnPromise=r.defer(),n.returnPromise.promise}function i(r){r.forEach(function(r){var n=r.register,t=r.result,i=r.operation;"end"===i&&(a.endReached=!0),o(i)&&e.setValueOfReg(n,t)})}function o(e){return u.indexOf(e)===-1}function c(){return n.returnPromise?(n.returnPromise.resolve(n.writeBackResults),n.returnPromise.promise):r.resolve()}var u=["cmp","end"],a={endReached:!1,parse:t,pipeThrough:c,shouldWriteBack:o};return a}angular.module("core").factory("WBService",e),e.$inject=["registerService","$q","WBModel"]}(),function(){"use strict";angular.module("core").constant("Math",window.Math)}(),function(){"use strict";function e(e){function r(r){var t=0,o=e.buffer.length,c=(o?e.buffer[o-1].valuesToCommit:0,n(r));return void 0!==i.coreRegisters[r]?t=i.coreRegisters[r]:void 0!==i.otherRegisters[r]?t=i.otherRegisters[r]:i.otherRegisters[r]=0,t=c||t}function n(r){var n=null,t=e.buffer;return t.reverse(),t.some(function(e){if(e.valuesToCommit[r])return n=e.valuesToCommit[r],!0}),t.reverse(),n}function t(e,r){return void 0!==i.coreRegisters[e]?i.coreRegisters[e]=r:i.otherRegisters[e]=r,e}var i={coreRegisters:{ax:0,bx:0,cx:0,dx:0,sp:0,bp:0,si:0,di:0},otherRegisters:{},getValueOfReg:r,setValueOfReg:t};return i}angular.module("core").factory("registerService",e),e.$inject=["speculativeModel"]}(),function(){"use strict";function e(){function e(e){var n=e||i.size;r(n)}function r(e){i.buffer=[];for(var r=0;r<e;r++)i.buffer[r]={branchInfo:{predictedValue:0},valuesToCommit:{},predictionOverrides:{}}}function n(e){i.buffer.shift(),i.buffer.push(e)}function t(e){var r=[];return e.forEach(function(e){r.push(e.branchInfo.predictedValue)}),r}var i={addingToSpeculative:!1,buffer:[],size:3,initialize:e,setMaxNumberOfBits:r,shiftWithValue:n,formPredictedArray:t};return i}angular.module("core").factory("speculativeModel",e),e.$inject=[]}(),function(){"use strict";function e(e,r,n,t,i,o,c,u,a){function l(){return 0===n.buffer.length}function s(){n.buffer=[]}function f(e,r){var t={branchInfo:e,valuesToCommit:{},predictionOverrides:r};return v(t),n.buffer[n.buffer.length-1]}function p(e,r){var t=n.buffer.length-1;n.buffer[t].valuesToCommit[e]=r}function d(e){var r=n.buffer,i=h(r);r=g(r),r.some(function(e,r){if(e.branchInfo.calculated){var n=e.branchInfo.calculatedValue;i=r,t.useCor&&t.value.push(n),e.branchInfo.shouldCommit&&P(e)}return!e.branchInfo.calculated});var o=y(r);r.splice(0,o)}function v(r){var c=(t.value.length,t.size,n.buffer.length),l=n.size;c<l?(n.buffer.push(r),t.useCor&&t.value.shift()):(a.cancel(u.pipelineInterval),window.alert("Too much! Stopping execution..."),e(function(){u.flushPipeline(),s(),t.clear(),i.clear(),o.clear(),u.pipelineActive=!1,u.pipelineStarted=!1},10))}function h(e){var r=-1;return e.some(function(e,n){return e.branchInfo.calculated&&e.branchInfo.shouldCommit&&(r=n),!e.branchInfo.shouldCommit}),r}function m(e,r){r.reverse().some(function(r){if(r===e)return!0;var n=r.predictionOverrides.localHistoryIndex,t=r.predictionOverrides.localHistoryArray,c=r.predictionOverrides.predictionMachineIndex,u=r.predictionOverrides.predictionMachineValue;i.setLocalHistoryArray(n,t),o.setPrediction(c,u)}),r.reverse();var n=e.predictionOverrides.localHistoryIndex,t=e.predictionOverrides.localHistoryArray,c=e.predictionOverrides.predictionMachineIndex,u=e.predictionOverrides.predictionMachineValue;i.setLocalHistoryArray(n,t),o.setPrediction(c,u)}function g(e){var r=null,n=null,i=0;if(e.some(function(t,o,u){if(t.branchInfo.mispredicted)return t.branchInfo.mispredicted=null,n=t.branchInfo.calculatedValue,r=o,i=t.branchInfo.pc,c.overridePc=t.branchInfo.mispredictionPc,m(t,e),!0}),null!==r){var u=e.length-(r+1);if(t.useCor)for(var a=0;a<u;a++)t.value.splice(0,0,0);e.splice(r+1,u),o.updatePredictionsExceptCorelation(n,i)}return e}function I(e){return n.buffer.some(function(r,n,t){if(r.pc===e)return t[n].calculated=!0,!0}),n.buffer}function b(e){n.buffer.some(function(r,n,t){if(r.pc===e){var i=t.length-n;return t.splice(n,i),!0}})}function P(e){var n=e.valuesToCommit;angular.forEach(n,function(e,n){r.setValueOfReg(n,e)})}function y(e){var r=e.length;return e.some(function(e,n){if(!e.branchInfo.calculated)return r=n,!0}),r}function S(){return n.buffer[n.buffer.length-1].valuesToCommit}var R={clear:s,modelIsEmpty:l,addTo:p,comfitValues:P,createNewBranchBuffer:f,mergeAndCommitValues:d,setBufferToCalculated:I,misprediction:b,getNextUncalculated:y,getLatestSpeculatedValues:S};return R}angular.module("core").factory("speculativeService",e),e.$inject=["$timeout","registerService","speculativeModel","corelationRegisterService","localHistoryTableService","predictionMachinesService","pcService","common","$interval"]}(),function(){"use strict";function e(e,r,n,t){function i(){u.corelationRegister.initializeCR()}function o(){var n=e.size,t=r.size;u.corelationRegister.setMaxNumberOfBits(u.corelationRegister.size),u.locationHistoryTable.initializeLHT(),u.predictionMachines.setMachineSize(n,t)}function c(e){var r={"true":{color:"green"},undefined:{color:"red"}};return r[e.calculated]}var u=this;u.corelationRegister=e,u.locationHistoryTable=r,u.predictionMachines=n,u.speculativeModel=t,u.updateValues=o,u.getStyleForPrediction=c,i()}angular.module("app").controller("CorelationRegisterController",e),e.$inject=["corelationRegisterService","localHistoryTableService","predictionMachinesService","speculativeModel"]}(),function(){"use strict";function e(){var e={restrict:"E",controller:"CorelationRegisterController",controllerAs:"corReg",templateUrl:"app/corelationRegister/corelation-register.html"};return e}angular.module("app").directive("corelationRegister",e),e.$inject=[]}(),function(){"use strict";function e(){function e(e){var n=e||c.size;r(n)}function r(e){c.value=[];for(var r=0;r<e;r++)c.value[r]=0}function n(e){c.value.shift(),c.value.push(e)}function t(){var e=c.value.join("");return parseInt(e,2)}function i(){return angular.copy(c.value)}function o(){c.value=[],e()}var c={value:[],size:6,useCor:!0,setMaxNumberOfBits:r,shiftWithValue:n,getRegisterValue:t,initializeCR:e,getCopy:i,clear:o};return c}angular.module("app").factory("corelationRegisterService",e),e.$inject=[]}(),function(){function e(e,r,n,t,i){function o(){a.localHistoryTable.initializeLHT()}function c(r){return e.changed.indexOf(r)!==-1}function u(r){var t=n.size,i=e.size;e.setSizeOfRegisters(),a.predictionMachines.setMachineSize(t,i)}var a=this;a.localHistoryTable=e,a.predictionMachines=i,a.updateValues=u,a.checkIfChanged=c,a.corelationRegister=n,o()}angular.module("app").controller("localHistoryTableController",e),e.$inject=["localHistoryTableService","pcService","corelationRegisterService","speculativeModel","predictionMachinesService"]}(),function(){"use strict";function e(){var e={restrict:"E",controller:"localHistoryTableController",controllerAs:"lht",templateUrl:"app/localHistoryTable/local-history-table.html"};return e}angular.module("app").directive("localHistoryTable",e),e.$inject=[]}(),function(){"use strict";function e(e,r,n){function t(){}function i(t){var i=t||d.size,c=n.pow(e.size+r.size,2);d.value=[],o(c),u(i)}function o(e){for(var r=0;r<e;)d.value[r++]=[]}function c(e){var r=n.pow(2,e);o(r),d.value=d.value.map(function(r){for(var n=0;n<e;n++)r[n]=0;return r})}function u(e){d.value=d.value.map(function(r){r=[];for(var n=0;n<e;n++)r[n]=0;return r})}function a(e,r){d.changed.indexOf(e)===-1&&d.changed.push(e),d.value[e].shift(),d.value[e].push(r)}function l(e){return angular.copy(d.value[e])}function s(e,r){return angular.copy(r,d.value[e])}function f(e){var r=d.value[e].join(""),n=parseInt(r,2);return n}function p(){d.value=[],d.changed=[],i()}var d={value:[],size:3,changed:[],numOfPcBits:3,useLht:!0,setMaxNumberOfBits:c,setSizeOfRegisters:u,shiftWithValue:a,getLocalHistoryValue:f,initializeLHT:i,getCopyOfLocalHistoryArrayFor:l,setLocalHistoryArray:s,clear:p};return t(),d}angular.module("app").factory("localHistoryTableService",e),e.$inject=["corelationRegisterService","speculativeModel","Math"]}(),function(){"use strict";function e(e,r,n){function t(){o.predictionMachines.setMachineSize()}function i(r){return e.changed.indexOf(r)!==-1}var o=this;o.numberOfMachines=e.numOfMachines,o.predictionMachines=e,o.checkIfChanged=i,t()}angular.module("app").controller("PredictionMachinesController",e),e.$inject=["predictionMachinesService","corelationRegisterService","localHistoryTableService"]}(),function(){function e(){var e={restrict:"E",controller:"PredictionMachinesController",controllerAs:"pm",templateUrl:"app/predictionMachines/prediction-machines.html"};return e}angular.module("app").directive("predictionMachines",e),e.$inject=[]}(),function(){"use strict";function e(e,r,n,t){function i(r,t){r=r||e.size,t=t||n.size,v.numOfMachines=Math.pow(2,r+t),v.value=[];for(var i=0;i<v.numOfMachines;)v.value[i++]=[1,0]}function o(e,r){var n=parseInt(v.value[e].join(""),2),t=Math.pow(2,2)-1;v.changed.indexOf(e)===-1&&v.changed.push(e),0===r&&n>0?n-=1:1===r&&n<t&&(n+=1);var i=n.toString(2);return v.value[e]=u(i,v.sizeOfMachines).split(""),v.value}function c(i){var o,c,u,a,l,s,f=e.useCor,p=n.useLht;return f&&!p?(o=e.getCopy(),c=t.formPredictedArray(t.buffer),a=parseInt(o.concat(c).join(""),2),l=v.value[a].join(""),s=parseInt(l,2),s>=2):!f&&p?(a=r.getLastBitsOfPc(n.numOfPcBits,i),l=v.value[a].join(""),s=parseInt(l,2),s>=2):(o=e.getCopy(),c=t.formPredictedArray(t.buffer),u=parseInt(o.concat(c).join(""),2),a=n.getLocalHistoryValue(u),l=v.value[a].join(""),s=parseInt(l,2),s>=2)}function u(e,r){for(var n="",t=0;t<r;t++)n+="0";return(n+e).slice(-r)}function a(e,r){v.value[e]=r}function l(i){var c=e.useCor,u=n.useLht,a=e.getCopy(),l=t.formPredictedArray(t.buffer),s=parseInt(a.concat(l).join(""),2),f=n.getLocalHistoryValue(s);c&&!u?f=s:!c&&u&&(s=r.getLastBitsOfPc(n.numOfPcBits),f=n.getLocalHistoryValue(s)),o(f,i),u&&n.shiftWithValue(s,i),c&&e.shiftWithValue(i)}function s(i,c){var u=e.useCor,a=n.useLht,l=e.getCopy(),s=t.formPredictedArray(t.buffer),f=parseInt(l.concat(s).join(""),2),p=n.getLocalHistoryValue(f);u&&!a?p=f:!u&&a&&(f=r.getLastBitsOfPc(n.numOfPcBits,c),p=n.getLocalHistoryValue(f)),o(p,i),a&&n.shiftWithValue(f,i),o(p,i)}function f(e){return angular.copy(v.value[e])}function p(e){var r=v.value.join("");return parseInt(r,2)}function d(){v.value=[],v.changed=[],i()}var v={numOfMachines:null,sizeOfMachines:2,value:[],changed:[],setMachineSize:i,setPrediction:a,getCurrentPrediction:c,updatePredictions:l,updatePredictionsExceptCorelation:s,getCopyOfMachine:f,getValueOfMachine:p,clear:d};return v}angular.module("app").factory("predictionMachinesService",e),e.$inject=["corelationRegisterService","pcService","localHistoryTableService","speculativeModel"]}();